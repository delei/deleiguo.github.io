<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>【小抄】JDK-常用集合-List | DeleiGuo</title>
  <meta name="author" content="DeleiGuo">
  
  <meta name="description" content="deleiguo,DeleiGuo,裤子_Delei,裤子_DeleiGuo,个人博客,技术博客,Java">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="【小抄】JDK-常用集合-List"/>
  <meta property="og:site_name" content="DeleiGuo"/>

  
    <meta property="og:image" content="undefined"/>
  

  <meta name="baidu-site-verification" content="jVJnkqumdj" />
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/plugins/font-awesome-4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/plugins/highlight/styles/atom-one-dark.css">
  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.2/animate.min.css">
  <link rel="stylesheet" href="/plugins/bootstrap-3.3.0/css/bootstrap.min.css">
  <!--[if lt IE 9]><script src="//cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script><![endif]-->

</head>


<body>
  <header id="header" class="">
        <div class="container">
          <a class="home-link" href="/">
  <h1 class="site-title animated zoomIn">DeleiGuo</h1>
  <h2 class="site-title-description animated zoomInLeft">Target、Focus、Patient</h2>
</a>
<div class="clearfix"></div>

        </div>
  </header>
  <nav id="main-nav" class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#ddnavbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
          </div>
          <div id="ddnavbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              
                <li><a href="/"><i class="fa fa-home">&nbsp;</i>首页</a></li>
              
                <li><a href="/archives"><i class="fa fa-archive">&nbsp;</i>归档</a></li>
              
                <li><a href="/books"><i class="fa fa-book">&nbsp;</i>书籍库</a></li>
              
                <li><a href="/about"><i class="fa fa-user">&nbsp;</i>关于</a></li>
              
              <li> <a href="/atom.xml"><i class="fa fa-rss">&nbsp;</i>RSS</a> </li>
            </ul>
          </div>
    </div>
    <div class="clearfix"></div>
  </nav>
  <div id="content">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2017-02-13T16:00:00.000Z"><a href="/2017/02/14/notes-jdk-collection/">2017-02-14</a></time>
      
      
  
    <h1 class="title"><strong>【小抄】JDK-常用集合-List</strong></h1>
  


    </header>
    <div class="entry">
      <!-- Table of Contents -->
      
      <div id="toc" class="toc-article">
      <strong class="toc-title">文章目录</strong>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#List"><span class="toc-number">1.</span> <span class="toc-text">List</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ArrayList"><span class="toc-number">1.1.</span> <span class="toc-text">ArrayList</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LinkedList"><span class="toc-number">1.2.</span> <span class="toc-text">LinkedList</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vector"><span class="toc-number">1.3.</span> <span class="toc-text">Vector</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#引用内容文章"><span class="toc-number">2.</span> <span class="toc-text">引用内容文章</span></a></li></ol>
      </div>
      
      
        <p>集合包是Java中最常用到的包，其中最常用的有Collection和Map两个接口的实现类。简单来说，Collection存放多个单对象，Map用于存放Key-Value形式的键值对。<br>其中,Collection中常用的分为List和Set两种类型接口，二者间最明显的差别为List支持放入重复的对象，而Set不支持。</p>
<p>以下是常用的集合类的小抄：</p>
<h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><h3 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h3><p>源码中定义的基本属性：</p>
<pre><code class="lang-java">    /**
     * Default initial capacity.
     * 默认初始化大小
     */
    private static final int DEFAULT_CAPACITY = 10;

    /**
     * Shared empty array instance used for empty instances.
     * 空对象数组：用于空数量定义
     */
    private static final Object[] EMPTY_ELEMENTDATA = {};

    /**
     * 存储数据的用的数组(注意：transient关键字表明该对象数组无法序列化)
     */
    private transient Object[] elementData;

    /**
     * The size of the ArrayList (the number of elements it contains).
     * ArrayList包含的元素数量
     */
    private int size;
</code></pre>
<a id="more"></a>
<p><strong>创建</strong></p>
<p>常用的创建一个新的ArrayList基本上有两种：</p>
<ul>
<li>无初始化数量</li>
</ul>
<pre><code class="lang-java">    public ArrayList(int initialCapacity) {
        super();
        if (initialCapacity &lt; 0)
            throw new IllegalArgumentException(&quot;Illegal Capacity: &quot;+
                                               initialCapacity);
        this.elementData = new Object[initialCapacity];
    }
</code></pre>
<ul>
<li>初始化数量(推荐使用)</li>
</ul>
<pre><code class="lang-java">public ArrayList(int initialCapacity) {
        super();
        if (initialCapacity &lt; 0)
            throw new IllegalArgumentException(&quot;Illegal Capacity: &quot;+
                                               initialCapacity);
        this.elementData = new Object[initialCapacity];
    }
</code></pre>
<ul>
<li>Collection</li>
</ul>
<pre><code class="lang-java">public ArrayList(Collection&lt;? extends E&gt; c) {
        elementData = c.toArray();
        size = elementData.length;
        // c.toArray might (incorrectly) not return Object[] (see 6260652)
        if (elementData.getClass() != Object[].class)
            elementData = Arrays.copyOf(elementData, size, Object[].class);
    }
</code></pre>
<p>这其中，<code>super()</code>调用的为<code>AbstractList</code>的默认构造方法，这其实是一个空方法。在Collection这种，主要是使用了<code>Arrays.copyOf</code>方法进行了转换；</p>
<p>以上代码最终主要就是new了一个<code>Object</code>数组，并将此数组赋给了<code>elementData</code>属性。据此可得<code>ArrayList</code>是用数组来存放数据的</p>
<p><strong>数组扩容</strong><br><code>ArrayList</code>既然是数组实现，那么在实际使用过程中，为了确保能够自动扩容，比如数组的元素超过默认数组大小10或者初始化的大小，<code>ArrayList</code>在<code>add(E e)</code>方法中，首先会进行<code>size+1</code>的操作并会通过如下几个<code>private</code>的方法来处理扩容:</p>
<pre><code class="lang-java">    /**
    * 与EMPTY_ELEMENTDATA比较，如果当前已超过默认大小，则进一步的比较
    **/
    private void ensureCapacityInternal(int minCapacity) {
        if (elementData == EMPTY_ELEMENTDATA) {
            minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);
        }
        ensureExplicitCapacity(minCapacity);
    }

    private void ensureExplicitCapacity(int minCapacity) {
        modCount++;
        // overflow-conscious code
        if (minCapacity - elementData.length &gt; 0)
            grow(minCapacity);
    }

    private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;

    private void grow(int minCapacity) {
        // overflow-conscious code
        int oldCapacity = elementData.length;
        int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);//新数组大小
        if (newCapacity - minCapacity &lt; 0)
            newCapacity = minCapacity;
        if (newCapacity - MAX_ARRAY_SIZE &gt; 0)
            newCapacity = hugeCapacity(minCapacity);
        // minCapacity is usually close to size, so this is a win:
        elementData = Arrays.copyOf(elementData, newCapacity);
    }
</code></pre>
<p>其中<code>minCapacity</code>即在<code>add(E e)</code>方法中的<code>size+1</code>，或者我们可以叫其”期望大小”。<br>这其中的<code>modCount</code>属相是<code>abstract class AbstractList</code>中的属性：</p>
<pre><code class="lang-java">protected transient int modCount = 0;
</code></pre>
<p>如果此值大于当前<code>elementData</code>的长度，则将当前的<code>elementData</code>数组通过<code>Arrays.copyOf</code>生成一个新的数组对象</p>
<p><strong>其他</strong></p>
<ul>
<li><code>ArrayList</code>在进行<code>remove</code>操作时并不会减小数组的容量，而在查找元素时要遍历数组，对于非Null的元素采取equals的方式寻找；</li>
<li>按数组下标访问元素－get（i）、set（i,e） 的性能很高，这是数组的基本优势。</li>
<li>如果按下标插入元素、删除元素－add（i,e）、 remove（i）、remove（e），则要用System.arraycopy（）来复制移动部分受影响的元素，性能就变差了。</li>
<li><code>ArrayList</code>是非线程安全的；</li>
</ul>
<h3 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h3><p><code>LinkedList</code>基于双向链表机制：集合中的每个元素都知道其前一个元素和其后一个元素的位置。体现在源代码中就在其定义了几个属性：</p>
<pre><code class="lang-java">    transient int size = 0;
    transient Node&lt;E&gt; first;
    transient Node&lt;E&gt; last;
</code></pre>
<p>其中Node对象是其内部对象：</p>
<pre><code class="lang-java">private static class Node&lt;E&gt; {
        E item;
        Node&lt;E&gt; next;
        Node&lt;E&gt; prev;

        Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) {
            this.item = element;
            this.next = next;
            this.prev = prev;
        }
    }
</code></pre>
<p><strong>LinkedList的操作</strong></p>
<ul>
<li><p><code>linkFirst</code>-头插法:即在链表头插入一个元素</p>
<pre><code class="lang-java">/**
* Links e as first element.
*/
private void linkFirst(E e) {
  final Node&lt;E&gt; f = first;
  final Node&lt;E&gt; newNode = new Node&lt;&gt;(null, e, f);
  first = newNode;
  if (f == null)
      last = newNode;
  else
      f.prev = newNode;
  size++;
  modCount++;
}
</code></pre>
</li>
<li><p><code>linkLast</code>-尾插法:即在链表尾部插入一个元素</p>
<pre><code class="lang-java">void linkLast(E e) {
      final Node&lt;E&gt; l = last;
      final Node&lt;E&gt; newNode = new Node&lt;&gt;(l, e, null);
      last = newNode;
      if (l == null)
          first = newNode;
      else
          l.next = newNode;
      size++;
      modCount++;
  }
</code></pre>
</li>
<li><p><code>linkBefore</code>-插入到当前结点之前： 找当前结点的前驱</p>
<pre><code class="lang-java">/**
* Inserts element e before non-null Node succ.
*/
void linkBefore(E e, Node&lt;E&gt; succ) {
  // assert succ != null;
  final Node&lt;E&gt; pred = succ.prev;
  final Node&lt;E&gt; newNode = new Node&lt;&gt;(pred, e, succ);
  succ.prev = newNode;
  if (pred == null)
      first = newNode;
  else
      pred.next = newNode;
  size++;
  modCount++;
}
</code></pre>
</li>
<li><p><code>unlinkFirst</code>-头删法： 删除链表的第一个结点</p>
<pre><code class="lang-java">/**
* Unlinks non-null first node f.
*/
private E unlinkFirst(Node&lt;E&gt; f) {
  // assert f == first &amp;&amp; f != null;
  final E element = f.item;
  final Node&lt;E&gt; next = f.next;
  f.item = null;
  f.next = null; // help GC
  first = next;
  if (next == null)
      last = null;
  else
      next.prev = null;
  size--;
  modCount++;
  return element;
}
</code></pre>
</li>
<li><p><code>unlinkLast</code>-尾删法：删除链表的最后一个结点</p>
<pre><code class="lang-java">/**
* Unlinks non-null last node l.
*/
private E unlinkLast(Node&lt;E&gt; l) {
  // assert l == last &amp;&amp; l != null;
  final E element = l.item;
  final Node&lt;E&gt; prev = l.prev;
  l.item = null;
  l.prev = null; // help GC
  last = prev;
  if (prev == null)
      first = null;
  else
      prev.next = null;
  size--;
  modCount++;
  return element;
}
</code></pre>
</li>
</ul>
<p><strong>其他</strong></p>
<ul>
<li>按下标访问元素－get（i）、set（i,e） 部分遍历链表将指针移动到位 （如果i&gt;数组大小的一半，会从末尾移起）。</li>
<li>插入、删除元素时修改前后节点的指针即可，不再需要复制移动。但还是要部分遍历链表的指针才能移动到下标所指的位置。</li>
<li>只有在链表两头的操作－add（）、addFirst（）、removeLast（）或用iterator（）上的remove（）倒能省掉指针的移动。</li>
<li>LinkedList是非线程安全的。</li>
</ul>
<h3 id="Vector"><a href="#Vector" class="headerlink" title="Vector"></a>Vector</h3><p><code>Vector</code>与<code>ArrayList</code>类似，相当于<code>ArrayList</code>的线程安全版，也是基于<code>Object</code>数组的方式来实现，但可以直接指定扩容时的容量</p>
<pre><code class="lang-java">public Vector(int initialCapacity, int capacityIncrement) {
    super();
    if (initialCapacity &lt; 0)
        throw new IllegalArgumentException(&quot;Illegal Capacity: &quot;+initialCapacity);
    this.elementData = new Object[initialCapacity];
    this.capacityIncrement = capacityIncrement;
}

public Vector(int initialCapacity) {
    this(initialCapacity, 0);
}

public Vector() {
    this(10);
}
</code></pre>
<p>在数组扩容上，与<code>ArrayList</code>有稍微的区别：</p>
<pre><code class="lang-java">private void grow(int minCapacity) {
    // overflow-conscious code
    int oldCapacity = elementData.length;
    int newCapacity = oldCapacity + ((capacityIncrement &gt; 0) ?
                                     capacityIncrement : oldCapacity);
    if (newCapacity - minCapacity &lt; 0)
        newCapacity = minCapacity;
    if (newCapacity - MAX_ARRAY_SIZE &gt; 0)
        newCapacity = hugeCapacity(minCapacity);
    elementData = Arrays.copyOf(elementData, newCapacity);
}
</code></pre>
<p>扩容的大小与<code>ArrayList</code>不一样，<code>Vector</code>中<code>Object</code>数组如果没有指定扩容量，一旦需扩容，则将大小扩为现有的两倍</p>
<p><code>Vector</code>的线程安全通过在<code>add()</code>、<code>remove()</code>、<code>get()</code>等方法中加<code>synchronized</code>关键字</p>
<h2 id="引用内容文章"><a href="#引用内容文章" class="headerlink" title="引用内容文章"></a>引用内容文章</h2><ul>
<li>春天的旁边(jnby1978):<a href="http://calvin1978.blogcn.com/articles/collection.html" target="_blank" rel="external">关于Java集合的小抄</a></li>
<li><a href="https://www.zybuluo.com/pastqing/note/208830" target="_blank" rel="external">Java集合框架——List（二）</a></li>
<li>grepcode:<a href="http://grepcode.com/snapshot/repository.grepcode.com/java/root/jdk/openjdk/7-b147/" target="_blank" rel="external">Open-source implementation of the Java SE 7 Platform</a></li>
</ul>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/tec/">TEC-技术</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/Java/"># Java</a> , <a href="/tags/JVM/"># JVM</a>
  </div>


        <br/>
<pre><code><b>*版权声明</b>:如未特殊标注说明，本文为原创,如需转载请注明来自,本文链接为<b><a href="/2017/02/14/notes-jdk-collection/" target="_blank" title="【小抄】JDK-常用集合-List">DeleiGuo:【小抄】JDK-常用集合-List</a></b>.</code></pre>

        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">留言</h1>
  <div class="comments" id="comments">
    <!--PC版-->
    <div id="SOHUCS" ></div>
    <script charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/changyan.js" ></script>
    <script type="text/javascript">
    window.changyan.api.config({
    appid: 'cysQz2Qts',
    conf: 'prod_5acaa35e106aef237971aea1fde5e4f8'
    });
    </script>
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <!-- <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:www.deleiguo.com">
  </form>
</div> -->


  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/pri/">PRI-文章</a><small>2</small></li>
  
    <li><a href="/categories/tec/">TEC-技术</a><small>21</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/DeleiGuo/">DeleiGuo</a><small>1</small></li>
  
    <li><a href="/tags/JVM/">JVM</a><small>14</small></li>
  
    <li><a href="/tags/Java/">Java</a><small>7</small></li>
  
    <li><a href="/tags/Linux/">Linux</a><small>3</small></li>
  
    <li><a href="/tags/Mac/">Mac</a><small>1</small></li>
  
    <li><a href="/tags/Team/">Team</a><small>1</small></li>
  
    <li><a href="/tags/Web/">Web</a><small>1</small></li>
  
  </ul>
</div>


  
  <div class="widget tag">
    <h3 class="title">归档</h3>
	<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2999/10/">2999年10月</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">2017年02月</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">2016年12月</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">2016年11月</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">2016年10月</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">2016年08月</a><span class="archive-list-count">1</span></li></ul>
  </div>



  <div class="widget tag">
    <h3 class="title">书签</h3>
    <ul class="entry">
        <li><i class="fa fa-link"></i>&nbsp;&nbsp;<a href="https://my.myssvpn.com/aff.php?aff=255" target="_blank" nofollow>翻墙：ShadowsocksR</a>
        </li>
        <li><i class="fa fa-link"></i>&nbsp;&nbsp;<a href="http://calvin1978.blogcn.com" target="_blank" nofollow>江南白衣</a>
        </li>
        <li><i class="fa fa-link"></i>&nbsp;&nbsp;<a href="http://coolshell.cn" target="_blank" nofollow>酷壳–CoolShell.cn</a>
        </li>
        <li><i class="fa fa-link"></i>&nbsp;&nbsp;<a href="http://www.hollischuang.com" target="_blank" nofollow>HollisChuang's Blog</a>
        </li>
        <li><i class="fa fa-link"></i>&nbsp;&nbsp;<a href="http://ifeve.com" target="_blank" nofollow>并发编程网-ifeve.com</a>
        </li>
        <li><i class="fa fa-link"></i>&nbsp;&nbsp;<a href="http://www.kuqin.com" target="_blank" nofollow>酷勤网</a>
        </li>
        <li><i class="fa fa-link"></i>&nbsp;&nbsp;<a href="https://www.javacodegeeks.com/" target="_blank" nofollow>Java Code Geeks</a>
        </li>
        <li><i class="fa fa-link"></i>&nbsp;&nbsp;<a href="http://grepcode.com" target="_blank" nofollow>grepcode.com</a>
        </li>
        <li><i class="fa fa-link"></i>&nbsp;&nbsp;<a href="http://www.importnew.com" target="_blank" nofollow>ImportNew</a>
        </li>
        <li><i class="fa fa-link"></i>&nbsp;&nbsp;<a href="http://www.jobbole.com" target="_blank" nofollow>伯乐在线</a>
        </li>
        <li><i class="fa fa-link"></i>&nbsp;&nbsp;<a href="http://wiki.jikexueyuan.com" target="_blank" nofollow>极客学院wiki</a>
        </li>
        <li><i class="fa fa-link"></i>&nbsp;&nbsp;<a href="https://segmentfault.com" target="_blank" nofollow>segmentfault</a>
        </li>
        <li><i class="fa fa-link"></i>&nbsp;&nbsp;<a href="http://hao.shejidaren.com/index.html" target="_blank" nofollow>设计导航</a>
        </li>
    </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer">
      <div class="container">
          <h5 style="color:#333;padding-top:15px;">
              I know no such things as genius,it is nothing but labor and diligence.<br/>
              -哪有什么天才之说，不过是勤奋
          </h5>
          <br/>
          <div class="text-center">
  
  &copy; 2017 DeleiGuo
  
  &nbsp;&nbsp;
  湘ICP备16012107号-1
  <br/>
  Powered by <a href="https://hexo.io" target="_blank">Hexo</a>. Theme by <a href="https://hexo.io/hexo-theme-light/" target="_blank">Light</a>.
  <br>
  <span id="busuanzi_container_site_pv">
    本站总访问量<span id="busuanzi_value_site_pv"></span>次
  </span>
  <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1261264269'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1261264269%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</div>
<div class="dd-github-camo">
  <a href="https://github.com/delei"><img style="position: absolute; top: 0; right: 0; border: 0;" src="/images/githubuser.png" alt="Fork me on GitHub"></a>
</div>
<div class="clearfix"></div>

      </div>
  </footer>
  <div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;">
<a title="返回顶部"><img src="/images/scrollup.png"/></a>
</div>

<script src="/plugins/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/plugins/highlight/highlight.pack.js"></script>
<script src="/plugins/bootstrap-3.3.0/js/bootstrap.min.js"></script>
<script src="/js/totop.js"></script>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script type="text/javascript">
(function($){
  hljs.initHighlightingOnLoad();
})(jQuery);
</script>





</body>
</html>
